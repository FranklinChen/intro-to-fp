<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
<title></title>
<meta name="author" content="Josh Suereth" />
<meta name="description" content="">

<link href="css/fonts/roboto.css" rel="stylesheet" />
<link href="css/hekyll.css" rel="stylesheet" />
<link href="css/syntax.css" rel="stylesheet" />
<link href="css/custom.css" rel="stylesheet" />
<link href="css/animations.css" rel="stylesheet" />

</head>
<body>
  <div id="impress" class="impress-not-supported">
    <div class="step">
      <h1 id='generic_service'>Generic Service</h1>
<div class='highlight'><pre><code class='scala'><span class='k'>class</span> <span class='nc'>GenericStatisticsService</span><span class='o'>[</span><span class='kt'>Context</span><span class='o'>[</span><span class='k'>_</span><span class='o'>]</span><span class='kt'>:</span> <span class='kt'>Monad</span><span class='o'>](</span><span class='n'>api</span><span class='k'>:</span> <span class='kt'>GhApi</span><span class='o'>[</span><span class='kt'>Context</span><span class='o'>])</span> <span class='o'>{</span>  
  <span class='k'>def</span> <span class='n'>statistics</span><span class='o'>(</span><span class='n'>user</span><span class='k'>:</span> <span class='kt'>String</span><span class='o'>)</span><span class='k'>:</span> <span class='kt'>Context</span><span class='o'>[</span><span class='kt'>Statistics</span><span class='o'>]</span> <span class='k'>=</span> <span class='o'>{</span>
      <span class='k'>val</span> <span class='n'>projects</span> <span class='k'>=</span> <span class='n'>api</span><span class='o'>.</span><span class='n'>projects</span><span class='o'>(</span><span class='n'>user</span><span class='o'>)</span>
      <span class='k'>def</span> <span class='n'>get</span><span class='o'>[</span><span class='kt'>B</span><span class='o'>](</span><span class='n'>f</span><span class='k'>:</span> <span class='kt'>Project</span> <span class='o'>=&gt;</span> <span class='nc'>Context</span><span class='o'>[</span><span class='kt'>Seq</span><span class='o'>[</span><span class='kt'>B</span><span class='o'>]])</span><span class='k'>:</span> <span class='kt'>Context</span><span class='o'>[</span><span class='kt'>Seq</span><span class='o'>[</span><span class='kt'>B</span><span class='o'>]]</span> <span class='k'>=</span> <span class='k'>for</span> <span class='o'>{</span>
        <span class='n'>ps</span> <span class='k'>&lt;-</span> <span class='n'>projects</span>
        <span class='n'>items</span> <span class='k'>&lt;-</span> <span class='n'>ps</span> <span class='n'>traverse</span> <span class='n'>f</span>
      <span class='o'>}</span> <span class='k'>yield</span> <span class='n'>items</span><span class='o'>.</span><span class='n'>flatten</span>
      <span class='k'>val</span> <span class='n'>pullRequests</span> <span class='k'>=</span> <span class='n'>get</span><span class='o'>(</span><span class='n'>api</span><span class='o'>.</span><span class='n'>pullrequests</span><span class='o'>)</span>
      <span class='k'>val</span> <span class='n'>watchers</span> <span class='k'>=</span> <span class='n'>get</span><span class='o'>(</span><span class='n'>api</span><span class='o'>.</span><span class='n'>watchers</span><span class='o'>)</span>
      <span class='o'>(</span><span class='n'>pullRequests</span> <span class='n'>zip</span> <span class='n'>watchers</span><span class='o'>)</span> <span class='n'>map</span> <span class='o'>{</span> <span class='k'>case</span> <span class='o'>(</span><span class='n'>prs</span><span class='o'>,</span> <span class='n'>ws</span><span class='o'>)</span> <span class='k'>=&gt;</span> <span class='nc'>Statistics</span><span class='o'>(</span><span class='n'>user</span><span class='o'>,</span> <span class='n'>ws</span><span class='o'>,</span> <span class='n'>prs</span><span class='o'>)}</span>
  <span class='o'>}</span>
<span class='o'>}</span>
</code></pre>
</div>
    </div>
  </div>
</body>
</html>

